{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart City Traffic Dashboard</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <link rel="icon" type="image/x-icon" href="/static/images/icon.jpg">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
  <div class="container">
    <h1>Smart City Traffic Dashboard</h1>

    <!-- CSV Upload -->
    <section>
      <h2>📤 Upload Traffic CSV</h2>
      <label for="csvFile">Select CSV file:</label>
      <input type="file" id="csvFile" accept=".csv">
      <button id="uploadBtn">Upload</button>
      <span class="spinner" id="uploadSpinner"></span>
    </section>

    <!-- Traffic Prediction -->
    <section>
      <h2>🔮 Predict Traffic Volume</h2>
      <label for="modelPredict">Choose Model:</label>
      <select id="modelPredict">
        <option value="rf">Random Forest</option>
        <option value="lstm">LSTM</option>
      </select>
      <button id="predictBtn">Predict</button>
      <span class="spinner" id="predictSpinner"></span>
      <canvas id="predictChart"></canvas>
      <div id="predictMsg"></div>
    </section>

    <!-- Traffic Optimization -->
    <section>
      <h2>🚦 Traffic Light Optimization</h2>
      <button id="optimizeBtn">Optimize</button>
      <span class="spinner" id="optimizeSpinner"></span>
      <canvas id="optChart"></canvas>
    </section>

    <!-- Congestion Zones Map -->
    <section>
      <h2>📍 Congestion Hotspots</h2>
      <button id="congestionBtn">Show Congestion</button>
      <span class="spinner" id="congestionSpinner"></span>
      <div id="congestionMap"></div>
    </section>

    <!-- Real-Time Traffic Volume -->
    <section>
      <h2>📈 Real-Time Traffic Volume</h2>
      <button id="realtimeBtn">Start Live Update</button>
      <span class="spinner" id="realtimeSpinner"></span>
      <canvas id="realtimeChart"></canvas>
    </section>

    <!-- ML Model Simulation -->
    <section>
      <h2>🧠 Run ML Model Simulation</h2>
      <button id="simulateBtn">Run Simulation</button>
      <span class="spinner" id="simulateSpinner"></span>
      <div id="simulationSummary" class="mt-3"></div>
      <ul id="simulationLogs" class="mt-3" style="max-height: 300px; overflow-y: auto;"></ul>
    </section>


  </div>

  <script src="{% static 'js/main.js' %}"></script>
</body>
</html>
